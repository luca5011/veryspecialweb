<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>회원가입</title>
<style>
    body { display:flex; justify-content:center; align-items:center; height:100vh; background:#f0f0f0; font-family:sans-serif;}
    #box { background:#fff; padding:30px; border-radius:10px; box-shadow:0 0 10px #ccc; width:300px; text-align:center;}
    input { width:260px; height:32px; margin:5px 0; border-radius:10px; border:1px solid #ccc; padding-left:10px;}
    button { width:270px; height:36px; border:none; border-radius:10px; background:rgb(164,199,255); cursor:pointer; }
    button:active { background:rgb(61,135,255);}
    a { display:block; margin-top:10px; color:gray; text-decoration:none;}
</style>
</head>
<body>
<div id="box">
    <h2>회원가입</h2>
    <input type="text" id="id" placeholder="ID"><br>
    <input type="password" id="pw" placeholder="Password"><br>
    <input type="text" id="name" placeholder="Name"><br>
    <input type="date" id="birth"><br>
    <input type="email" id="email" placeholder="Email"><br>
    <button id="joinBtn">가입하기</button>
    <a href="login.html">로그인</a>
</div>

<script>
const apiUrl = "https://script.google.com/macros/s/AKfycbybysHXJhuS7CtXUyyXVCdhnx04RncQwtlu6HBdJFSm_dTrZyASP2jTYirB_M2mYKeMKw/exec";

async function registerUser(id, pw, name, birth, email){
    const res = await fetch(apiUrl,{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body: JSON.stringify({action:"register", id, pw, name, birth, email})
    });
    return await res.text();
}

document.getElementById("joinBtn").addEventListener("click", async ()=>{
    const id = document.getElementById("id").value;
    const pw = document.getElementById("pw").value;
    const name = document.getElementById("name").value;
    const birth = document.getElementById("birth").value;
    const email = document.getElementById("email").value;

    if(!id||!pw||!name||!birth||!email){ alert("모든 항목을 입력하세요."); return; }

    const result = await registerUser(id, pw, name, birth, email);
    if(result==="OK"){
        alert("회원가입 완료!");
        window.location.href="login.html";
    } else {
        alert("회원가입 실패: "+result);
    }
});
</script>
</body>
</html>
